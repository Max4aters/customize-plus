/**
 * Move the `padding` from the `<ul>` to the controls `<li>`s
 * so they are fullwidth in the sidebar, allowing a nice highlighting
 * in various situation like `:hover` or `.focus()`
 */
#customize-theme-controls .accordion-section-content,
#customize-theme-controls .customize-pane-child.accordion-section-content {
  padding: 0;
}
.customize-section-title {
  margin: 0;
}
// .kkcp-control,
.customize-control,
.customize-section-description {
  padding-left: $control--spacing-left;
  padding-right: $control--spacing-right;
}
.customize-section-description-container+#customize-control-custom_css:last-child {
  margin-bottom: 0; // @@wptight-css override { margin-bottom: -12px; } \\
}

/**
 * Control changes, class applied on `<li>` container of each of our custom
 * controls and WordPress native control as well
 *
 * Do not apply this on:
 * - `code_editor` native WordPress control
 * - `theme` native WordPress control
 */
.customize-control {
// .kkcp-control {
  box-sizing: border-box;
  margin: 0; // @@wptight-css-override .customize-control {} \\
  padding-top: $control--spacing-top;
  padding-bottom: $control--spacing-bottom;

  // Highlight the hovered control making it more prominent and visible.
  border-color: transparent;
  border-style: solid;
  border-width: 1px 0;
  transition: background-color .18s ease;

  &:hover {
    background-color: $control--bg-hover;
    border-color: darken($control--bg-hover, 1%);
  }

  // Give always some spacing on the bottom of the last control in the section
  &:last-of-type {
    border-bottom: none;
    margin-bottom: $WPcustomize--control-margin-bottom * 2;
  }
}

/**
 * Status class
 *
 * @deprecated: Show message attribute on controls, used i.e. to show a
 * validation error without the need of new DOM, through js it is enough
 * to add or change the `data-kkcp-msg` and optionally add a status class.
 */
.customize-control {
  // &[data-kkcp-msg]:after {
  //   content: attr(data-kkcp-msg);
  // }
  // &.kkcp-error {}

  &.has-error {
    // background: $state--danger-bg;

    // &:after {
    //   color: $state--danger-color;
    //   font-size: 11px;
    // }

    input,
    textarea,
    select,
    .selectize-input,
    .selectize-dropdown {
      border-color: $state--danger-border;
      box-shadow: $state--danger-box-shadow;
    }
  }
}

/**
 * Highlight focused control (through WordPress API method control.focus())
 * adding the class `.kkcp-control-focused` to the `control.container`
 */
.kkcp-control {
  // background: $control--bg;

  &-focused {
    // transition: background 2s ease;
    .no-cssanimations {
      background: $control--bg-focus;
    }
    // transform: scale(1.2);
    transform-origin: left center;
    animation: focus-control 1.8s ease;
  }
}

@keyframes focus-control {
  0% { box-shadow: 0 0 0 rgba(0,0,0,0); background: $control--bg; }
  50% { box-shadow: 0 0 80px rgba(0,0,0,.38); background: $control--bg-focus; margin: 24px 0; }
  100% { box-shadow: 0 0 0 rgba(0,0,0,0); background: $control--bg; }
}

/**
 * Add a subtle background to section description areas
 */
.customize-section-description-container {
  background: linear-gradient(lighten($control--bg, 10%) 45%, rgba(0,0,0,0) 100%);
}

/**
 * Reset our control custom style on the Nav Menus and Widgets WordPress native
 * panels. Add also generic class to apply on panel `ul` container to reset the
 * control style.
 */
.kkcp--reset-style,
.control-section-nav_menu,
#sub-accordion-section-custom_css {

  #customize-theme-controls &.accordion-section-content.open,
  #customize-theme-controls &.customize-pane-child.accordion-section-content.open {
    padding: $WPcustomize--section-gutter-vertical $WPcustomize--section-gutter-horizontal;
  }

  .customize-section-title {
    margin: $WPcustomize--section-title-margin;
  }

  .customize-control {
    padding: 0;
    margin-bottom: $WPcustomize--control-margin-bottom;
    border: 0;

    &:hover {
      background: transparent;
    }
  }

  #customize-control-custom_css {
    margin-bottom: -$WPcustomize--control-margin-bottom;
  }
}
.control-section-nav_menu {
  .customize-control {
    margin-bottom: inherit;
  }
}

/**
 * 'Highlight' hovered control fading out a bit all the others
 *
 */
// .kkcp-control {
//   transition: opacity .1s ease;

//   .control-section .accordion-section-content:hover & { // .kkcp-control-section
//     opacity: .8;
//   }
//   .control-section .accordion-section-content &:hover { // .kkcp-control-section
//     opacity: 1;
//   }
//   // on search active we have multple accordion-section visible
//   // at the same time so we have to target the overall sidebar inner area
//   // to trigger the hover higlight in the right way
//   .kkcp-searching #customize-theme-controls:hover & {
//     opacity: .8;
//   }
//   .kkcp-searching #customize-theme-controls &:hover {
//     opacity: 1;
//   }
// }
